{% extends 'base.html.twig' %}

{% block titre %}Vente ‚Äî Logix G-Stock{% endblock %}

{% block contenu %}

<div class="container my-4">

    <h1>üßæD√©tail de la vente {{ vente.id }}</h1>

    {#bloc info vente #}

    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-primary text-white fw-bold">
            Informations g√©n√©rales
        </div>

    <div class="card-body">
        <table class="table table-bordered">
        
            <tr>
                <th>Id</th>
                <td>{{ vente.id }}</td>
            </tr>
            <tr>
                <th>DateVente</th>
                <td>{{ vente.dateVente ? vente.dateVente|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>MontantTotal</th>
                <td>{{ vente.montantTotal }}</td>
            </tr>
            <tr>
                <th>Etat</th>
                <td>{{ vente.etat }}</td>
            </tr>
           <tr>
            <th>Client</th>
                <td>{{ vente.client ? vente.client.nom ~ ' ' ~ vente.client.prenom : '‚Äî' }}</td>
            </tr>
        
            {#<tr>
                <th>DateCreation</th>
                <td>{{ vente.dateCreation ? vente.dateCreation|date('Y-m-d H:i:s') : '' }}</td>
            </tr>#}

            <tr>
                <th>DateModification</th>
                <td>{{ vente.dateModification ? vente.dateModification|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
        </tbody>
    </table>
</div>
</div>

  {# bloc d√©tails produits#}


   <div class="card shadow-sm">
  <div class="card-header bg-secondary text-white fw-bold">
    Produits vendus
  </div>

  <div class="card-body">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Produit</th>
          <th>Quantit√©</th>
          <th>Prix unitaire</th>
          <th>Sous-total</th>
        </tr>
      </thead>
      <tbody>
        {% for d in vente.detailVentes %}
          <tr>
            <td>{{ d.produit.nom }}</td>
            <td>{{ d.quantite }}</td>
            <td>{{ d.prixUnitaire|number_format(2, ',', ' ') }} ‚Ç¨</td>
            <td>{{ (d.quantite * d.prixUnitaire)|number_format(2, ',', ' ') }} ‚Ç¨</td>
          </tr>
        {% else %}
          <tr>
            <td colspan="4" class="text-center">Aucun produit</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>








         

<div class="detail-actions">

    <a href="{{ path('app_vente_index') }}" class="btn-detail btn-detail-secondary" >Afficher la liste</a>

    <a href="{{ path('app_vente_edit', {'id': vente.id}) }}" class="btn-detail btn-detail-secondary" >Modifier</a>

    {{ include('vente/_delete_form.html.twig') }}
</div>


<div class="detail-actions">
    <a href="{{ path('app_vente_facture', {id: vente.id}) }}" class="btn-detail btn-detail-secondary">
        T√©l√©charger la facture (PDF)
    </a>
</div
{% endblock %}
