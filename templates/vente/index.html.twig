{% extends 'base.html.twig' %}

{% block titre %}Ventes â€” Logix G-Stock{% endblock %}

{% block contenu %}
<h1 class="mb-4">ğŸ§¾ Liste des ventes</h1>

<div class="mb-3"><a class="btn btn-success" href="{{ path('app_vente_new') }}">â• Ajouter une vente</a></div>

<table class="table table-hover table-bordered align-middle">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Date</th>
      <th>TVA</th>
      <th>Montant total</th>
      <th>Client</th>
       <th>Ã‰tat</th>
      <!--<th>CrÃ©Ã© le</th>-->
      <th>ModifiÃ© le</th>

    </tr>
  </thead>
  <tbody>
  {% for vente in ventes %}
    <tr class="row-click"
      data-href="{{ path('app_vente_show', {id: vente.id}) }}">
      <td>{{ vente.id }}</td>
      <td>{{ vente.dateVente ? vente.dateVente|date('d/m/Y H:i') : '' }}</td>
      <td>{{ vente.tauxTvaLabel }}</td>
      <td>{{ vente.montantTotal|number_format(2, ',', ' ') }} â‚¬</td>
      <td>{{ vente.client ? vente.client.nom ~ ' ' ~ vente.client.prenom: '-'}}</td>
      <!--<td>{{ vente.dateCreation ? vente.dateCreation|date('d/m/Y H:i') : '' }}</td>-->
      <td>{{ vente.etat }}</td>
      <td>{{ vente.dateModification ? vente.dateModification|date('d/m/Y H:i') : '' }}</td>
    </tr>
  {% else %}
    <tr>
      <td colspan="8" class="text-center">âš ï¸ Aucune vente trouvÃ©e</td>
    </tr>
  {% endfor %}
  </tbody>
</table>


<a class="btn btn-outiline-secondary ms-2" href="{{path('app_accueil')}}">ğŸ Retour Ã  l'accueil</a>

{# pagination #}
{% if pages > 1 %}
    <nav aria-label="Pagination produits">
        <ul class="pagination mt-3">
            {# â† prÃ©cÃ©dent #}
            <li class="page-item {{ page == 1 ? 'disabled' : '' }}">
                <a class="page-link" href="{{ path('app_vente_index', {page: page - 1}) }}">PrÃ©cÃ©dent</a>
            </li>

            {# â† les numÃ©ros de pages #}
            {% for i in 1..pages %}
                <li class="page-item {{ i == page ? 'active' : '' }}">
                    <a class="page-link" href="{{ path('app_vente_index', {page: i}) }}">{{ i }}</a>
                </li>
            {% endfor %}

            {# â†’ suivant #}
            <li class="page-item {{ page == pages ? 'disabled' : '' }}">
                <a class="page-link" href="{{ path('app_vente_index', {page: page + 1}) }}">Suivant</a>
            </li>
        </ul>
    </nav>
{% endif %}

{% endblock %}
