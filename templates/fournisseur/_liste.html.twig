{# templates/fournisseur/_liste.html.twig #}
<table class="table table-hover table-bordered align-middle">
  <thead class="table-dark">
    <tr>
      <th>ID</th>

      {# Nom + flèche triable #}
      <th>
        {% set params = app.request.query.all %}
        {% set nextSort = sort == 'name_asc' ? 'name_desc' : 'name_asc' %}
        {% set params = params|merge({'sort': nextSort, 'page': 1}) %}

        <a href="{{ path('app_fournisseur_index', params) }}" class="text-decoration-none d-inline-flex align-items-center gap-1">
          Nom
          {% if sort == 'name_asc' %}
            ↑
          {% elseif sort == 'name_desc' %}
            ↓
          {% else %}
            ↕
          {% endif %}
        </a>
      </th>

      <th>Email</th>
      <th>Téléphone</th>
      <th>Adresse</th>
      <th>Num TVA</th>
      <th>Créé le</th>
    </tr>
  </thead>
  <tbody>
    {% for fournisseur in fournisseurs %}
      <tr class="row-click" data-href="{{ path('app_fournisseur_show', {id: fournisseur.id}) }}">
        <td>{{ fournisseur.id }}</td>
        <td>{{ fournisseur.nom }}</td>
        <td>{{ fournisseur.email ?? '' }}</td>
        <td>{{ fournisseur.telephone ?? '' }}</td>
        <td>{{ fournisseur.adresse ?? '' }}</td>
        <td>{{ fournisseur.numTva ?? '' }}</td>
        <td>{{ fournisseur.dateCreation ? fournisseur.dateCreation|date('d/m/Y H:i') : '' }}</td>
      </tr>
    {% else %}
      <tr>
        <td colspan="7" class="text-center">Aucun fournisseur trouvé</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{# pagination #}
{% if pages > 1 %}
  <ul class="pagination mt-3">
    <li class="page-item {{ page == 1 ? 'disabled' : '' }}">
      <a class="page-link js-page"
         href="?page={{ page - 1 }}&q={{ q|default('') }}&sort={{ sort|default('recent') }}">
        Précédent
      </a>
    </li>

    {% for i in 1..pages %}
      <li class="page-item {{ i == page ? 'active' : '' }}">
        <a class="page-link js-page"
           href="?page={{ i }}&q={{ q|default('') }}&sort={{ sort|default('recent') }}">
          {{ i }}
        </a>
      </li>
    {% endfor %}

    <li class="page-item {{ page == pages ? 'disabled' : '' }}">
      <a class="page-link js-page"
         href="?page={{ page + 1 }}&q={{ q|default('') }}&sort={{ sort|default('recent') }}">
        Suivant
      </a>
    </li>
  </ul>
{% endif %}
