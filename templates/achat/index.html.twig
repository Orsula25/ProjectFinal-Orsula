{% extends 'base.html.twig' %}

{% block titre %}Achats ‚Äî Logix G-Stock{% endblock %}

{% block contenu %}
<h1 class="mb-4">üì¶ Liste des achats</h1>

<table class="table table-hover table-bordered align-middle">
  <thead class="table-dark">
    <tr>
      <th>Id</th>
      <th>Date</th>
      <th>TVA</th>
      <th>Montant total</th>
      <th>Fournisseur</th>
      <th>√âtat</th>
      <th>Modifi√© le</th>

    </tr>
  </thead>
  <tbody>
  {% for achat in achats %}
    <tr class="row-click"
      data-href="{{ path('app_achat_show', {id: achat.id}) }}">
      <td>{{ achat.id }}</td>
      <td>{{ achat.dateAchat ? achat.dateAchat|date('d/m/Y H:i') : '' }}</td>
      <td>{{ achat.tauxTvaLabel }}</td>
      <td>{{ achat.montantTotal|number_format(2, ',', ' ') }} ‚Ç¨</td>
      <td><a href="{{ path ('app_fournisseur_show', {'id': achat.fournisseur.id})}}">{{ achat.fournisseur.nom ? achat.fournisseur.nom : '' }}</a></td>
      <td>{{ achat.etat }}</td>
      <td>{{ achat.dateModification ? achat.dateModification|date('d/m/Y H:i') : '' }}</td>
    </tr>
  {% else %}
    <tr>
      <td colspan="7" class="text-center">‚ö†Ô∏è Aucun achat trouv√©</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<a class="btn btn-success" href="{{ path('app_achat_new') }}">‚ûï Ajouter un achat</a>
<a class="btn btn-outiline-secondary ms-2" href="{{path('app_accueil')}}">üè†Retour √† l'accueil</a>

{# pagination #}
{% if pages > 1 %}
  <nav aria-label="Pagination achats">
    <ul class="pagination mt-3">
      <li class="page-item {{ page == 1 ? 'disabled' : '' }}">
        <a class="page-link" href="{{ path('app_achat_index', {page: page - 1}) }}">Pr√©c√©dent</a>
      </li>

      {% for i in 1..pages %}
        <li class="page-item {{ i == page ? 'active' : '' }}">
          <a class="page-link" href="{{ path('app_achat_index', {page: i}) }}">{{ i }}</a>
        </li>
      {% endfor %}

      <li class="page-item {{ page == pages ? 'disabled' : '' }}">
        <a class="page-link" href="{{ path('app_achat_index', {page: page + 1}) }}">Suivant</a>
      </li>
    </ul>
  </nav>
{% endif %}
{% endblock %}


  
